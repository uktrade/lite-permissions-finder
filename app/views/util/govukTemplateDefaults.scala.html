@import views.html.common.page.govukTemplate
@import play.twirl.api.HtmlFormat
@import components.common.auth.SpireAuthManager
@import models.template.AnalyticsTemplateHtml

@this(spireAuthManager: SpireAuthManager, analyticsTemplateHtml: AnalyticsTemplateHtml)
@(htmlTitle: String, propositionHeading: Option[Html] = None)(content: Html)

@head = {
  @Html(analyticsTemplateHtml.getHead)
  <!--[if gt IE 8]><!-->
  <link href="@controllers.routes.Assets.versioned("stylesheets/permissions-finder.css")" media="screen" rel="stylesheet" type="text/css" />
  <!--<![endif]-->
  <!--[if (lte IE 8) & (gte IE 6)]><link href="@controllers.routes.Assets.versioned("stylesheets/permissions-finder-ie.css")" media="screen" rel="stylesheet" type="text/css" /><![endif]-->
  <link href="@controllers.routes.Assets.versioned("stylesheets/permissions-finder-print.css")" media="print" rel="stylesheet" type="text/css" />
}

@bodyStart = {
  @Html(analyticsTemplateHtml.getBody)
}

@bodyEnd = {
  <script type="text/javascript" src="@routes.JavaScriptRoutesController.javascriptRoutes"></script>
  <script type="text/javascript" src="@controllers.routes.Assets.versioned("javascripts/standard-page.js")"></script>
}

@propositionHeadingHtml = {
  <div class="header-proposition">
    <div class="content">
      <nav id="proposition-menu">
        <span id="proposition-name">@propositionHeading.getOrElse("Import / Export Licensing")</span>
        <div class="account-header">
        @if(spireAuthManager.getAuthInfoFromContext.isAuthenticated) {
          @spireAuthManager.getAuthInfoFromContext.getFullName | <a href="@org.pac4j.play.routes.LogoutController.logout">Sign out</a>
        }
        </div>
      </nav>
    </div>
  </div>
}


@govukTemplate(
  Some(htmlTitle),
  bodyClasses = None,
  htmlLang = None
)(
  head = head,
  bodyStart = bodyStart,
  bodyEnd = bodyEnd,
  insideHeader = HtmlFormat.empty,
  afterHeader = HtmlFormat.empty,
  footerTop = HtmlFormat.empty,
  footerLinks = HtmlFormat.empty,
  headerClass = Html("with-proposition"),
  propositionHeader = propositionHeadingHtml,
  homepageUrl = None,
  globalHeaderText = None,
  cookieMessage = None,
  skipLinkMessage = None,
  skipLinkTarget = "contentStart",
  logoLinkTitle = None,
  licenceMessage = Html("<p>All content is available under the " +
    "<a rel=\"license\" href=\"https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/\">Open Government Licence v3.0</a>," +
    " except where otherwise stated</p>"),
  crownCopyrightMessage = None
)(content)