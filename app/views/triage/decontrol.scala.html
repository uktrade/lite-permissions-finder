@import org.apache.commons.lang3.StringUtils
@import models.view.AnswerView
@import models.view.BreadcrumbView
@import views.html.triage.subAnswers
@import views.html.frontendComponents.formCheckboxWithDetailPanel

@this()
@(form: Form[_], stageId: String, sessionId: String, resumeCode: String, controlCode: String, title: String, explanatoryText: String, answerViews: List[AnswerView], breadcrumbView: BreadcrumbView, showNoteMessage: Boolean)

@triagePage(form, stageId, sessionId, resumeCode, title, breadcrumbView){
  @controlCode: Checking against decontrols
}{
  <p class="form-hint">
    Decontrols describe items not controlled under the UK Strategic Export Control Lists. Select all that apply.
  </p>
  <p>
    @if(showNoteMessage) {
      <p>
        Read the Notes on the right before making your selection on this page.
      </p>
    }
    @if(StringUtils.isNotBlank(explanatoryText)) {
      @Html(explanatoryText)
    } else {
      This control list entry does not control:
    }
  </p>
  <div class="form-group">
    @for((answerView, index) <- answerViews.iterator.zipWithIndex) {
      @if(answerView.isDividerAbove) {
        <p class="form-block">or</p>
      }
      @formCheckboxWithDetailPanel(form("answers"), answerView.getPrompt + subAnswers(answerView.getSubAnswerViews) + answerView.getNestedContent, isPromptHtml = true, inputId = "answers" + index, inputName = "answers[" + index + "]", inputValue = answerView.getValue, detailPanelId = answerView.getValue + "detailPanel", detailPanelPrompt = "More information") {
        @answerMoreInformation(answerView)
      }
    }
  </div>
}
