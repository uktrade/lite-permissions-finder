@import controllers.licencefinder.DestinationController
@import util._
@import views.html.common.page._
@import views.html.common.form._
@import uk.gov.bis.lite.countryservice.api.CountryView
@import play.data.Form
@import views.html.common.form._
@import play.twirl.api.HtmlFormat

@this(standardPage: standardPage)
@(form: Form[_], countries: List[CountryView], sessionId: String)

@multipleCountriesQuestion = @{
  Html(DestinationController.DESTINATION_MULTIPLE_QUESTION)
}

@legend = {
  <div class="panel panel-border-wide">
    <p>
      You only need a Form 680 approval to export classified or sensitive materials. <a href="https://www.gov.uk/guidance/mod-f680-applications" rel="external" target="_blank">
      Read more about MOD Form 680</a>.</p>
  </div>
}


@destinationDetailPanel = {
  @detailPanel("destination-help"){
    I can't find my destination
  } {
    <h2 class="heading-medium">Need some help?</h2>
    If you can't find your destination country or territory you can get help from the government's Export Control Organisation, by telephone on 020 7215 4594, or by email at <a href="mailto:eco.help@@trade.gov.uk">eco.help@@trade.gov.uk</a>.
  }
}

@consigneeDetailPanel = {
@detailPanel("consignee-help"){
  I can't find the right country or territory
} {
  <h2 class="heading-medium">Need some help?</h2>
  If you can't find the right country or territory you can get help from the government's Export Control Organisation, by telephone on 020 7215 4594, or by email at <a href="mailto:eco.help@@trade.gov.uk">eco.help@@trade.gov.uk</a>.
}
}

@standardPage("Finding the right licence", Some(heading(DestinationController.DESTINATION_QUESTION))){
  @errorSummary(form)
} {
  <form action="@controllers.licencefinder.routes.DestinationController.handleDestinationSubmit(sessionId)" method="POST">

    @views.html.helper.CSRF.formField

    @countrySelect(form(DestinationController.DESTINATION_COUNTRY), countries, Some("Type your destination country or territory"), Some("form-hint"), None, Some(destinationDetailPanel))

    @formRadioBooleanWithContent(form(DestinationController.MULTIPLE_COUNTRIES), multipleCountriesQuestion) {
      @countrySelect(form(DestinationController.FIRST_CONSIGNEE_COUNTRY), countries, Some("Type the country or territory where the first consignee or other party will receive the items"), detailPanel = Some(consigneeDetailPanel))
    }(HtmlFormat.empty)

    <div class="form-group">
      <button type="submit" class="button">Continue</button>
    </div>
  </form>

  <script type="text/javascript" src="@controllers.routes.Assets.versioned("javascripts/destination-country.js")"></script>

}